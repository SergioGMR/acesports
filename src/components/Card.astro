---
const { event } = Astro.props;

const getLowerSport = (sport: string): string => {
  return sport.toLowerCase().replace(/\s*\([^)]*\)/, "");
};

let lowerSport = getLowerSport(event.sport);
---

<div
  class="card relative bg-cover bg-center rounded-xl shadow-lg p-6"
  style={`background-image: url('/bgsports/${lowerSport}.webp');`}
  data-sport={event.sport}
  data-date={event.date.day}
  data-home={event.teams.home}
  data-away={event.teams.away}
>
  <div
    class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-800 to-transparent opacity-90 rounded-xl"
  >
  </div>

  <!-- Esquina superior izquierda: Deporte y Competición -->
  <div class="absolute top-4 left-4 space-y-2">
    <span
      class="bg-yellow-500 searchable text-black text-xs font-bold py-1 px-3 rounded-full capitalize"
      >{event.sport}</span
    >
    <span
      class="bg-gray-700 searchable text-white text-xs font-semibold py-1 px-3 rounded-full capitalize"
      >{event.competition}</span
    >
  </div>

  <!-- Esquina superior derecha: Fecha y Hora -->
  <div class="absolute top-4 right-4 space-y-2 text-right">
    <span
      class="bg-blue-500 text-white text-xs font-bold py-1 px-3 rounded-full searchable capitalize"
      >{event.date.day}</span
    >
    <span
      class="bg-gray-700 text-white text-xs font-semibold py-1 px-3 rounded-full event-time searchable uppercase"
      data-time={`${event.date.day} ${event.date.time}`}
      data-zone={event.date.zone}
    >
      {event.date.time}
      {event.date.zone}
    </span>
  </div>

  <!-- Contenido central -->
  <div class="relative z-10 flex flex-col items-center text-white mt-20">
    {
      event.teams.home && event.teams.away ? (
        <>
          <h2
            class="text-2xl font-extrabold capitalize searchable"
            data-home={event.teams.home}
          >
            {event.teams.home}
          </h2>

          <div class="text-lg font-semibold text-yellow-500 mt-2">V.S.</div>
          <h2
            class="text-2xl font-extrabold capitalize searchable"
            data-away={event.teams.away}
          >
            {event.teams.away}
          </h2>
        </>
      ) : (
        <h2 class="text-2xl font-bold capitalize text-center w-full text-purple-100 searchable">
          {event.title}
        </h2>
      )
    }
  </div>

  <!-- Botón al final (si es necesario) -->
  <div class="relative z-10 mt-8 flex justify-center gap-x-3">
    {
      event.channels.map((channel: string, index: number) => (
        <a
          href={channel}
          target="_blank"
          rel="noopener noreferrer"
          class="bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-6 rounded-full shadow-lg transition-all text-sm"
        >
          Canal {index + 1}
        </a>
      ))
    }
  </div>
</div>
